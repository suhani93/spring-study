# 테스트 코드의 필요성

> 1. 로직상의 실수를 잡아준다. 
> 2. 리팩토링이 쉬워진다.



# 테스트 기법의 종류

> 1. 수동 테스트
>    - 품질 담당자가 UI를 사용해 기능을 검증하는 테스트 방법이다.
>    - 최종 사용자의 사용 경험과 가장 비슷하게 검증이 가능하다.
>    - 실행 비용이 높으며 결과 변동이 크다. -> 휴먼 에러의 가능성이 존재
> 2. 테스트 자동화
>    - 사람이 직접 테스트하지 않고,어떤 기능을 검증하는 또 다른 코드를 작성하는 방법이다.
>    - 테스트 실행 비용이 낮아지며 결과 변동이 적다 -> 신뢰도가 높아진다.
>    - 개발자가 테스트 자동화를 위한 코드를 더 많이 작성해야 한다. 
>    - 테스트 코드를 작성하는 개발자의 개인 역량에 따라 테스트 코드의 품질에 차이가 많이 난다.
> 3. 인수 테스트
>    - 배치된 시스템을 대상으로 검증하는 방식이다.
>    - 주로 클라이언트가 의로한 소프트웨어를 최종적으로 사용할 수 있는 수준인지 점검하는 테스트이다.
>    - 전체 시스템 이상여부를 체크하여 신뢰도가 높다.
>    - 개발, 관리, 실행에 대한 비용이 많이 높다.
>    - 에러가 발생시 에러가 발생한 것은 파악이 가능하지만 원인까지 한번에 알 수 는 없다.
> 4. 단위테스트
>    - 인수 테스트의 단점을 보안하는 검증 방식이다.
>    - 시스템을 단위 별로 나눠서 테스트하는 방법이다.
>    - 개발, 관리, 실행에 대한 비용이 낮다.
>    - 단위별로 테스트를 진행하기에 원인까지 한번에 알 수 있다.
>    - 전체 시스템 이상 여부에 대한 체크는 하지 않아서 전체 시스템의 이상 여부에 대한 신뢰도는 낮다.





# TDD (테스트 주도 개발) 

> 소프트웨어를 개발하는 여러 방법론 중 하나이다.
>
> 테스트를 먼저 만들고 테스트를 통과하는 코드를 만들면서 개발하는 방법이다.







# TDD 의 장점

> 1. 개발 중에 피드백을 받을 수 있다. -> 개발하면서 바로 성공 실패 여부를 알 수 있다.
> 2. 작성된 코드가 가지는 불안정성을 개선하여 생산성을 높일 수 있다. -> 개발 완료 후 인계 혹은 유지보수 과정에서 발생하는 문제를 미리 진단 받을 수 있다.
> 3. 개발자의 오버 엔지니어링을 방지한다. -> 테스트를 통과하기 위한 최소한의 코드만 작성 및 개선해야하는 원칙을 지키게 되면 오버 코딩을 방지하게 된다.





# TDD 하는 방법 ( 개발 프로세스 )

> TDD의 상태는 크게 3가지 상태로 나뉜다.
>
> - RED : 테스트 실패  - 아래 그림에서 TEST 부분
>   - 구체적인 하나의 요구사항을 검증하는 하나의 테스트를 추가한다. -
>   - 추가된 테스트가 실패한 것을 확인한다. -> 테스트가 실패해야 테스트가 동작함을 믿을 수 있다.
> - GREEN : 테스트 성공 - 아래 그림에서 CODE 부분
>   - 추가된 테스트가 동작하도록 기능을 구현한다. 
> - REFACTOR : 리팩토링 - 아래 그림에서 REFACTORING부분
>   - 구현된 코드를 정리한다. -> 설계를 개선하여 가독성, 적용성, 성능을 높인다.



 [ 출처 : 점프 투 자바 ] (https://wikidocs.net/224) 

![](https://wikidocs.net/images/page/224/tdd_flow.jpg)





# TDD를 고려해야하는 상황

> 1. 처음해보는 프로그램 주제 - 나의 대한 불확실성이 높은 경우
> 2. 고객의 요구조건이 자주 변하는 경우 - 외부적인 불확실성이 높은 경우
> 3. 개발하는 중에 코드를 많이 변경해야 하는 경우 - 개발에 대한 불확실성이 높은 경우
> 4. 내가 개발 한 후 누가 내 코드를 유지보수 할 지 모르는 경우 - 타인의 대한 불확실성이 높은 경우

> 즉, 생소한 주제로 로직을 개발을 하거나 요구 사항이 변할 가능성이 있는 경우 TDD를 하면 된다.



# 단위테스트 ( Unit Test)

> 소스코드에 대해서 테스트 단위을 정해 테스트를 하는 것이다.
>
> 즉, 모든 작은 단위의 비지니스 로직 코드가 정상적으로 작동하는지에 대하여 테스트하는 것을 말한다.



# 단위테스트를 하는 이유

> 1. 테스팅에 대한 시간과 비용을 절감 할 수 있다. -> 작은 단위로 바로바로 피드백이 와서 문제의 원인 파악이 쉽다.
> 2. 새로운 기능 추가시 수시로 빠르게 테스트 가능하다 -> 새로운 비지니스 로직이 추가되는 경우 기존 코드가 정상적으로 작동하는지 바로 파악가능하다.
> 3. 리팩토링시에 안정성을 확보 할 수 있다. -> 코드 정리를 했을 때 에러가 나면 바로 파악 가능하다.
> 4. 작은 단위로 해당 부분만 독립적으로 테스트하기에 빠르다



# 좋은 단위 테스트의 특징

> 1. 한개의 테스트 함수에 대해 assert를 최소화한다. -> 정확히 무슨 소리인지??
>
> 2. 1개의 테스트 함수는 1가지 개념만을 테스트한다. -> 최소한의 단위로 테스트를 해야한다.
>
> 3. FIRST 규칙을 따라야 한다.
>
>    - Fast : 테스트는 빠르게 동작하여 자주 돌릴 수 있어야 한다. -> 테스팅 하는 시간이 적어야 테스트를 맘놓고 할 수 있다.
>
>    - Independent : 각각의 테스트는 독립적이며 서로 의존해서는 안된다.
>    - Repeatable : 어느 환경에서도 반복 가능해야 한다.
>    - Self-Validating : 테스트는 성공 또는 실패로 Boolean 값으로 결과를 내어 자체적으로 검증되어야 한다.
>    - Timely : 테스트는 적시에 즉, 테스트하려는 실제 코드를 구현하기 직전에 구현해야 한다.
>
> 



# GIVEN / WHEN / THEN 패턴

> 1개의 단위 테스트를 3가지 단계로 나눠 처리하는 패턴이다.
>
> - Given ( 준비 ) : 어떠한 데이터를 준비한다.
>
> - When ( 실행 ) : 어떠한 함수를 실행한다.
>
> - Then ( 검증 ) : 어떠한 결과가 나와야 한다.



# 개인적으로 테스트 코드가 필요하다고 느꼈던 순간

1. 새로운 비지니스 로직의 코드를 작성하는 경우 -> 로직을 모르니까 실수할 가능성이 너무 많았습니다.
2. 돈과 같이 데이터가 틀어지면 안되는 정보가 있는 경우 -> 로깅을 잘 해서 틀어져도 복구할 수 있다면 그나마 괜찮은 상황이지만 그렇지 않은 경우 최대한 틀어지는 경우를 방지할 수 있을것 같습니다.
3. 타인이 개발한 코드를 유지보수 하는 경우 -> 개개인 별로 코드 스타일이 너무 달라서 코드를 읽고 이해한 후 로직을 변경 & 반영을 해야할 때 내가 변경한 코드가 다른곳에 영향이 없이 정상적으로 작동하는지에 대한 확신이 없었습니다.
4. 최근 DB 이전으로 인하여 모든 데이터를 이전한 경우 DB가 정상적으로 작동하는 지에 대한 테스트를 손으로 하나씩 데이터 까보면서 했던 일이 있는데 이때 DB에 대한 테스트 코드가 있었다면 어땠을까 하는 생각이 들었습니다.
